# Streamlit Secrets Configuration Example
# ==========================================
# This file shows the structure for configuring Google Cloud Storage
# for persistent data storage on Streamlit Cloud.
#
# IMPORTANT: This is just an example. Do NOT commit actual secrets to git.
# For Streamlit Cloud deployment, add these secrets via the web interface:
# https://docs.streamlit.io/streamlit-community-cloud/deploy-your-app/secrets-management

# ==========================================
# Google Cloud Storage Configuration
# ==========================================
[storage]
# Name of your GCS bucket (must be unique globally)
gcs_bucket_name = "knesset-data-your-unique-suffix"

# Enable/disable cloud storage sync (set to false to disable)
enable_cloud_storage = true

# ==========================================
# GCP Service Account Credentials
# ==========================================
# These are obtained from your Google Cloud Console:
# 1. Go to: https://console.cloud.google.com/
# 2. Navigate to: IAM & Admin > Service Accounts
# 3. Create a new service account (or use existing)
# 4. Grant "Storage Admin" role to the service account
# 5. Create a JSON key and download it
# 6. Copy all fields from the JSON key file below

[gcp_service_account]
type = "service_account"
project_id = "your-gcp-project-id"
private_key_id = "your-private-key-id"
private_key = "-----BEGIN PRIVATE KEY-----\nYour private key content here\n-----END PRIVATE KEY-----\n"
client_email = "your-service-account@your-project.iam.gserviceaccount.com"
client_id = "your-client-id"
auth_uri = "https://accounts.google.com/o/oauth2/auth"
token_uri = "https://oauth2.googleapis.com/token"
auth_provider_x509_cert_url = "https://www.googleapis.com/oauth2/v1/certs"
client_x509_cert_url = "https://www.googleapis.com/robot/v1/metadata/x509/your-service-account%40your-project.iam.gserviceaccount.com"
universe_domain = "googleapis.com"

# ==========================================
# Setup Instructions
# ==========================================
#
# 1. CREATE GCS BUCKET:
#    - Go to: https://console.cloud.google.com/storage
#    - Click "Create Bucket"
#    - Choose a globally unique name (e.g., "knesset-data-institute-2025")
#    - Region: Choose closest to your users (or multi-region for redundancy)
#    - Storage class: Standard
#    - Access control: Uniform
#    - Click "Create"
#
# 2. CREATE SERVICE ACCOUNT:
#    - Go to: https://console.cloud.google.com/iam-admin/serviceaccounts
#    - Click "Create Service Account"
#    - Name: "knesset-streamlit-storage"
#    - Grant role: "Storage Admin" (for full bucket access)
#    - Click "Done"
#
# 3. CREATE JSON KEY:
#    - Click on the service account you just created
#    - Go to "Keys" tab
#    - Click "Add Key" > "Create new key"
#    - Choose "JSON" format
#    - Download the JSON file (keep it secure!)
#
# 4. ADD TO STREAMLIT CLOUD:
#    - Go to your Streamlit Cloud dashboard
#    - Click on your app > Settings > Secrets
#    - Copy the contents of this file, replacing values with your actual credentials
#    - Paste into the secrets editor
#    - Save
#
# 5. VERIFY:
#    - Redeploy your app
#    - Check logs for "Storage sync service initialized with GCS"
#    - Run a data refresh
#    - Check your GCS bucket for uploaded files
#
# ==========================================
# Cost Estimate (Google Cloud Storage)
# ==========================================
# Your data size: ~56 MB
# Free tier: 5 GB/month (more than enough!)
# Estimated cost: $0.00/month (within free tier)
#
# Even if you exceed free tier:
# - Storage: $0.020 per GB/month = ~$0.001/month for 56MB
# - Operations: Minimal (a few uploads/downloads per day)
# Total: < $0.05/month
#
# ==========================================
# Security Best Practices
# ==========================================
# 1. Never commit secrets to git
# 2. Use service accounts (not personal credentials)
# 3. Grant minimum necessary permissions (Storage Admin for this bucket only)
# 4. Rotate keys periodically
# 5. Enable bucket versioning for disaster recovery
# 6. Consider bucket lifecycle policies to auto-delete old versions
#

# ==========================================
# CAP Bill Annotation Configuration
# ==========================================
# This enables the Democratic Erosion bill annotation feature
# for authorized researchers.
#
# The annotation system allows researchers to:
# - Code bills according to the Democratic Erosion codebook
# - Track which bills affect democratic institutions/rights
# - Export annotations for analysis
#
# Annotations are stored in the DuckDB database and sync to GCS.

[cap_annotation]
# Enable/disable the annotation feature
enabled = true

# Password for accessing the annotation interface
# Choose a secure password and share only with authorized researchers
password = "your-secure-password-here"

# Name of the researcher (for audit trail)
# This name will be recorded with each annotation
researcher_name = "Dr. Researcher Name"

# ==========================================
# CAP Annotation Setup Instructions
# ==========================================
#
# 1. Copy this section to your secrets.toml
# 2. Set a secure password
# 3. Enter the researcher's name
# 4. The annotation page will appear in the main app
# 5. Researchers can login and start coding bills
#
# The codebook is based on the Democratic Erosion taxonomy:
# - Government Institutions (codes 101-108)
# - Civil Institutions (codes 201-204)  
# - Rights (codes 301-306)
#
# Each bill is coded with:
# - Category (minor code)
# - Direction: +1 (strengthening), -1 (weakening), 0 (other)
# - Submission date (required for +1/-1)
# - Optional notes
#

# ==========================================
# CAP Bill Annotation Configuration
# ==========================================
# This enables the Democratic Erosion bill annotation feature
# for authorized researchers.
#
# The annotation system allows researchers to:
# - Code bills according to the Democratic Erosion codebook
# - Track which bills affect democratic institutions/rights
# - Export annotations for analysis
#
# Annotations are stored in the DuckDB database and sync to GCS.

[cap_annotation]
# Enable/disable the annotation feature
enabled = true

# Password for accessing the annotation interface
# Choose a secure password and share only with authorized researchers
password = "your-secure-password-here"

# Name of the researcher (for audit trail)
# This name will be recorded with each annotation
researcher_name = "Dr. Researcher Name"

# ==========================================
# CAP Annotation Setup Instructions
# ==========================================
#
# 1. Copy this section to your secrets.toml
# 2. Set a secure password
# 3. Enter the researcher's name
# 4. The annotation page will appear in the main app
# 5. Researchers can login and start coding bills
#
# The codebook is based on the Democratic Erosion taxonomy:
# - Government Institutions (codes 101-108)
# - Civil Institutions (codes 201-204)  
# - Rights (codes 301-306)
#
# Each bill is coded with:
# - Category (minor code)
# - Direction: +1 (strengthening), -1 (weakening), 0 (other)
# - Submission date (required for +1/-1)
# - Optional notes
#
